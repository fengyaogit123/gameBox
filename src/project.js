window.__require=function t(e,o,i){function c(r,s){if(!o[r]){if(!e[r]){var p=r.split("/");if(p=p[p.length-1],!e[p]){var a="function"==typeof __require&&__require;if(!s&&a)return a(p,!0);if(n)return n(p,!0);throw new Error("Cannot find module '"+r+"'")}}var d=o[r]={exports:{}};e[r][0].call(d.exports,function(t){return c(e[r][1][t]||t)},d,d.exports,t,e,o,i)}return o[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<i.length;r++)c(i[r]);return c}({BestText:[function(t,e,o){"use strict";cc._RF.push(e,"abd13ngas5NuZr/nf24o2Bc","BestText"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.onLoad=function(){var t=window,e=t.localStorage.getItem("bestScore")||0;t.score>+e?(t.localStorage.setItem("bestScore",t.score),this.node.getComponent(cc.Label).string="Best:"+t.score):this.node.getComponent(cc.Label).string="Best:"+e},e.prototype.start=function(){},__decorate([n(cc.Label)],e.prototype,"label",void 0),__decorate([n],e.prototype,"text",void 0),e=__decorate([c],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],Box:[function(t,e,o){"use strict";cc._RF.push(e,"8ab90AhdopGi60YE2JVIWgo","Box"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=[400,600,800],e.direction=1,e.newDrop=null,e.stopAnimt=null,e.particle=null,e.sp1=null,e.sp2=null,e.sp3=null,e.sp4=null,e.sp5=null,e.sp6=null,e.sp7=null,e.sp8=null,e.sp9=null,e.sp_lz1=null,e.sp_lz2=null,e.sp_lz3=null,e.sp_lz4=null,e.sp_lz5=null,e.sp_lz6=null,e.sp_lz7=null,e.sp_lz8=null,e.sp_lz9=null,e.sp_lz_1=null,e.sp_lz_2=null,e.sp_lz_3=null,e.sp_lz_4=null,e.sp_lz_5=null,e.sp_lz_6=null,e.sp_lz_7=null,e.sp_lz_8=null,e.sp_lz_9=null,e.isMove=!1,e.cw=0,e.cy=0,e.collision=null,e.beginContact=null,e.overGame=null,e.boxList=[],e.particleSystem=null,e.animtNode=null,e.animt=null,e.index=null,e.checkpoint=1,e.isStop=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=window;this.speed=[400,600,800],t.getSpeed1&&(this.speed[0]=t.getSpeed1()||400),t.getSpeed2&&(this.speed[1]=t.getSpeed2()||600),t.getSpeed3&&(this.speed[2]=t.getSpeed3()||800),this.index=~~(8*Math.random()+1),this.node.getComponent(cc.Sprite).spriteFrame=this["sp"+this.index],this.createdBox(0,+this.node.height/2),this.createdBottomBox(0,-40)},e.prototype.createdBox=function(t,e){var o=cc.instantiate(this.particle);return o.setPosition(cc.v2(t,e)),this.particleSystem=o.getComponent(cc.ParticleSystem),this.particleSystem.spriteFrame=this["sp_lz"+this.index],this.node.addChild(o),this.particleSystem.stopSystem(),o},e.prototype.createdBottomBox=function(t,e){var o=cc.instantiate(this.stopAnimt);return o.setPosition(cc.v2(t,e)),this.node.addChild(o),this.animtNode=o,this.animt=this.animtNode.getComponent(cc.Animation),this.animtNode.getComponent(cc.Sprite).spriteFrame=this["sp_lz_"+this.index],this.animtNode.opacity=0,o},e.prototype.start=function(){},e.prototype.initParticleSystem=function(){this.particleSystem.duration=-1,this.particleSystem.emissionRate=10,this.particleSystem.life=.3,this.particleSystem.totalParticles=150,this.particleSystem.angle=90,this.particleSystem.startSize=140},e.prototype.init=function(t,e,o){var i=o.collision,c=o.boxList,n=o.beginContact,r=o.checkpoint,s=o.overGame;this.cw=t,this.cy=e,this.boxList=c,this.collision=i||function(){},this.beginContact=n||function(){},this.overGame=s||function(){};var p=[0,-t/2+this.node.width/2,t/2-this.node.width/2];this.direction=Math.random()>.5?1:-1,this.node.x=p[parseInt(3*Math.random()+"")],this.checkpoint=r},e.prototype.playAnimat=function(){this.animtNode.opacity=1,this.animt.play()},e.prototype.falling=function(){this.moveStop(),this.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,this.particleSystem.resetSystem()},e.prototype.move=function(){this.isMove=!0},e.prototype.moveStop=function(){this.isMove=!1},e.prototype.onBeginContact=function(t,e,o){0!==e.tag&&e.tag===this.boxList.length&&(this.collision&&this.collision(),this.particleSystem.stopSystem(),cc.audioEngine.play(this.newDrop,!1,1),this.playAnimat(),this.beginContact&&this.beginContact())},e.prototype.update=function(t){if(this.isMove){this.node.x+=this.direction*this.speed[this.checkpoint-1]*t;var e=this.cw/2-this.node.width/2,o=-this.cw/2+this.node.width/2;this.node.x>e&&(this.node.x=e-1,this.direction=-1*this.direction),this.node.x<o&&(this.node.x=o+1,this.direction=-1*this.direction)}this.isStop||this.node.y<-this.cy/2+this.node.height&&(this.isStop=!0,this.overGame&&this.overGame())},__decorate([n],e.prototype,"speed",void 0),__decorate([n],e.prototype,"direction",void 0),__decorate([n(cc.AudioClip)],e.prototype,"newDrop",void 0),__decorate([n(cc.Prefab)],e.prototype,"stopAnimt",void 0),__decorate([n(cc.Prefab)],e.prototype,"particle",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp1",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp2",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp3",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp4",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp5",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp6",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp7",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp8",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp9",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz1",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz2",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz3",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz4",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz5",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz6",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz7",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz8",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz9",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz_1",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz_2",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz_3",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz_4",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz_5",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz_6",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz_7",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz_8",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"sp_lz_9",void 0),e=__decorate([c],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"b7d42OPCCxMWYnHlbsDlNuz","Game"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.box=null,e.demoBox=null,e.boxList=[],e.bottomBox=null,e.newComplete=null,e.bgAudio=null,e.bgAudioId=null,e.ggAudio=null,e.sbAudio=null,e.sucAudio=null,e.djsAudio=null,e.djsAudioId=null,e.checkpoint=1,e.gameBoxNum=10,e.sec=60,e.demoBoxList=[],e.level1_active=null,e.level2_active=null,e.level2=null,e.level3=null,e.level3_active=null,e.level_1=null,e.level_2=null,e.level_3=null,e.bg_1=null,e.bg_2=null,e.bg_3=null,e.bg_1_node=null,e.bg_2_node=null,e.bg_3_node=null,e.isOver=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=window;t.getGameBoxNum&&(this.gameBoxNum=t.getGameBoxNum(1)||10),this.initSec(),cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-2e3),cc.director.preloadScene("Score",function(){console.log("\u52a0\u8f7d\u5b8c\u6210")}),t.onGameStart&&t.onGameStart(this.checkpoint),this.createBg1(),this.createDemoBox(),this.createLevel1(),this.bgAudioId=cc.audioEngine.play(this.bgAudio,!0,1)},e.prototype.createBg1=function(){this.bg_1_node&&this.bg_1_node.destroy(),this.bg_1_node=cc.instantiate(this.bg_1),this.bg_1_node.setPosition(cc.v2(0,0)),this.bg_1_node.zIndex=1e3,this.node.addChild(this.bg_1_node)},e.prototype.createBg2=function(){this.bg_2_node&&this.bg_2_node.destroy(),this.bg_2_node=cc.instantiate(this.bg_2),this.bg_2_node.zIndex=1e3,this.bg_2_node.setPosition(cc.v2(0,0)),this.node.addChild(this.bg_2_node)},e.prototype.createBg3=function(){this.bg_3_node&&this.bg_3_node.destroy(),this.bg_3_node=cc.instantiate(this.bg_3),this.bg_3_node.zIndex=1e3,this.bg_3_node.setPosition(cc.v2(0,0)),this.node.addChild(this.bg_3_node)},e.prototype.createDemoBox=function(){this.demoBoxList=[];for(var t=0;t<this.gameBoxNum;t++)this.createDemoBoxPrefab(-this.node.width/2+80,-this.node.height/2+100+100*t)},e.prototype.createLevel1=function(){var t=-this.node.width/2+80,e=this.node.height/2-80;this.level_1=cc.instantiate(this.level1_active),this.level_2=cc.instantiate(this.level2),this.level_3=cc.instantiate(this.level3),this.level_1.setPosition(cc.v2(t,e)),this.level_2.setPosition(cc.v2(t+80,e)),this.level_3.setPosition(cc.v2(t+160,e)),this.node.addChild(this.level_1),this.node.addChild(this.level_2),this.node.addChild(this.level_3)},e.prototype.createLevel2=function(){var t=-this.node.width/2+80,e=this.node.height/2-80;this.level_2&&this.level_2.destroy(),this.level_2=cc.instantiate(this.level2_active),this.level_2.setPosition(cc.v2(t+80,e)),this.node.addChild(this.level_2)},e.prototype.createLevel3=function(){var t=-this.node.width/2+80,e=this.node.height/2-80;this.level_3&&this.level_3.destroy(),this.level_3=cc.instantiate(this.level3_active),this.level_3.setPosition(cc.v2(t+160,e)),this.node.addChild(this.level_3)},e.prototype.createDemoBoxPrefab=function(t,e){var o=this.createdDemoBox(t,e);return o.width=80,o.height=80,this.demoBoxList.push(o),o},e.prototype.initSec=function(){var t=window;t.getGameSec?this.sec=t.getGameSec()||60:this.sec=60},e.prototype.start=function(){var t=this;this.bottomBox=this.createBottomBox(),this.createTopMoveBox(),this.addEvent();var e=function(){if(t.sec--,0!==t.sec){t.sec<=10&&null===t.djsAudioId&&(t.djsAudioId=cc.audioEngine.play(t.djsAudio,!1,1));try{t.node.getChildByName("min").getComponent(cc.Label).string=t.sec+""}catch(t){}setTimeout(e,1e3)}else t.overGame()};e()},e.prototype.addEvent=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(e){t.boxList[t.boxList.length-1].getComponent("Box").falling()})},e.prototype.createTopMoveBox=function(){var t=this.node.height/2-200,e=this.createdBoxTop(0,t),o=e.getComponent("Box");e.getComponent(cc.PhysicsBoxCollider).tag=this.boxList.length+1,o.init(this.node.width,this.node.height,{collision:this.collisionBox.bind(this),boxList:this.boxList,beginContact:this.beginContact.bind(this),checkpoint:this.checkpoint,overGame:this.overGame.bind(this)}),this.boxList.push(e);var i=this.demoBoxList[this.demoBoxList.length-1];i&&i.destroy(),this.demoBoxList.pop()},e.prototype.overGame=function(t){var e=this;if(this.initSec(),this.node.getComponent(cc.Animation).play(),setTimeout(function(){window.score=e.getScoreLabel().string,cc.director.loadScene("Score")},300),!t){var o=window;o.onGameOver&&o.onGameOver(this.checkpoint),this.isOver||(cc.audioEngine.play(this.sbAudio,!1,1),this.isOver=!0),cc.audioEngine.stop(this.bgAudioId)}null!==this.djsAudioId&&(cc.audioEngine.stop(this.djsAudioId),this.djsAudioId=null)},e.prototype.getScoreLabel=function(){return this.node.getChildByName("score").getComponent(cc.Label)},e.prototype.beginContact=function(){var t=this.getScoreLabel(),e=+t.string;if(t.string=e+1+"",this.boxList.length===this.gameBoxNum+1){this.boxList.map(function(t){t.destroy()}),this.boxList=[],this.bottomBox.destroy();var o=window;if(o.onGameSuccess&&o.onGameSuccess(this.checkpoint),3===this.checkpoint)return this.overGame("success"),void cc.audioEngine.play(this.sucAudio,!1,1);cc.audioEngine.play(this.ggAudio,!1,1),this.checkpoint++,this.initSec(),o.onGameStart&&o.onGameStart(this.checkpoint),o.getGameBoxNum&&(this.gameBoxNum=o.getGameBoxNum(this.checkpoint)||10),this["createLevel"+this.checkpoint]&&this["createLevel"+this.checkpoint](),this["createBg"+this.checkpoint]&&this["createBg"+this.checkpoint](),this.createdNew()}},e.prototype.createdNew=function(){this.bottomBox=this.createBottomBox(),this.createTopMoveBox(),this.createDemoBox()},e.prototype.collisionBox=function(){this.createTopMoveBox()},e.prototype.createBottomBox=function(){var t=-this.node.height/2+100,e=this.createdBox(0,t);return e.getComponent(cc.PhysicsBoxCollider).tag=0,e},e.prototype.createdBox=function(t,e){var o=cc.instantiate(this.box);return o.setPosition(cc.v2(t,e)),this.node.addChild(o),o},e.prototype.createdDemoBox=function(t,e){var o=cc.instantiate(this.demoBox);return o.setPosition(cc.v2(t,e)),this.node.addChild(o),o},e.prototype.createdBoxTop=function(t,e){var o=cc.instantiate(this.box);return o.setPosition(cc.v2(t,e)),o.getComponent("Box").move(),this.node.addChild(o),o},__decorate([n(cc.Prefab)],e.prototype,"box",void 0),__decorate([n(cc.Prefab)],e.prototype,"demoBox",void 0),__decorate([n(cc.AudioClip)],e.prototype,"newComplete",void 0),__decorate([n(cc.AudioClip)],e.prototype,"bgAudio",void 0),__decorate([n(cc.AudioClip)],e.prototype,"ggAudio",void 0),__decorate([n(cc.AudioClip)],e.prototype,"sbAudio",void 0),__decorate([n(cc.AudioClip)],e.prototype,"sucAudio",void 0),__decorate([n(cc.AudioClip)],e.prototype,"djsAudio",void 0),__decorate([n(cc.Prefab)],e.prototype,"level1_active",void 0),__decorate([n(cc.Prefab)],e.prototype,"level2_active",void 0),__decorate([n(cc.Prefab)],e.prototype,"level2",void 0),__decorate([n(cc.Prefab)],e.prototype,"level3",void 0),__decorate([n(cc.Prefab)],e.prototype,"level3_active",void 0),__decorate([n(cc.Prefab)],e.prototype,"bg_1",void 0),__decorate([n(cc.Prefab)],e.prototype,"bg_2",void 0),__decorate([n(cc.Prefab)],e.prototype,"bg_3",void 0),e=__decorate([c],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],HomeBtn:[function(t,e,o){"use strict";cc._RF.push(e,"983a8+iwctNb5iBHk5jk7YD","HomeBtn"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;cc.director.preloadScene("Start",function(){console.log("\u52a0\u8f7d\u5b8c\u6210"),t.node.on(cc.Node.EventType.TOUCH_START,function(e){t.node.getParent().getComponent(cc.Animation).play(),setTimeout(function(){cc.director.loadScene("Start")},350)})})},e.prototype.start=function(){},__decorate([n(cc.Label)],e.prototype,"label",void 0),__decorate([n],e.prototype,"text",void 0),e=__decorate([c],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],ScoreText:[function(t,e,o){"use strict";cc._RF.push(e,"ef4feolvo5MfoQ5nlmmUqyp","ScoreText"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.onLoad=function(){var t=window;this.node.getComponent(cc.Label).string="Score:"+(t.score||0)},e.prototype.start=function(){},__decorate([n(cc.Label)],e.prototype,"label",void 0),__decorate([n],e.prototype,"text",void 0),e=__decorate([c],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],StartBtn:[function(t,e,o){"use strict";cc._RF.push(e,"af75cgemC9HFqFuK9VAXdlA","StartBtn"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,n=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;cc.director.preloadScene("Game",function(){console.log("\u52a0\u8f7d\u5b8c\u6210")}),this.node.on(cc.Node.EventType.TOUCH_START,function(e){t.node.getParent().getComponent(cc.Animation).play(),setTimeout(function(){cc.director.loadScene("Game")},350)})},e.prototype.start=function(){},__decorate([n(cc.Label)],e.prototype,"label",void 0),__decorate([n],e.prototype,"text",void 0),e=__decorate([c],e)}(cc.Component);o.default=r,cc._RF.pop()},{}]},{},["BestText","Box","Game","HomeBtn","ScoreText","StartBtn"]);